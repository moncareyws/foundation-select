"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();!function(e){var t=function(){function t(i,s){return _classCallCheck(this,t),this.$select=i,this.$select.is("select")?(this.options=e.extend({},t.defaults,this.$select.data(),s),this._init(),Foundation.registerPlugin(this,"Select"),void Foundation.Keyboard.register("Select",{SPACE:"open",ESCAPE:"close",TAB:"tab",SHIFT_TAB:"tab",ARROW_UP:"select_up",ARROW_DOWN:"select_down"})):void console.warn("The select can only be used on a <select> element.")}return _createClass(t,[{key:"_init",value:function(){var t=Foundation.GetYoDigits(6,"select"),i=Foundation.GetYoDigits(6,"select-dropdown"),s=e('label[for="'+this.$select.attr("id")+'"]'),n=e('<div class="select-wrapper">'),a=e('<div class="select-container">'),l=e("<div data-perfect-scrollbar>");this.$select.wrap(n),this.$select.after(a),this.$element=e('<input type="text" id="'+t+'" data-toggle="'+i+'" readonly>'),a.append(this.$element),s.attr("for",t),this.$selectTriangle=e('<i class="select-triangle fa '+this.options.iconClass+'" data-toggle="'+i+'">'),a.append(this.$selectTriangle),this.$dropdown=e("<div>"),this.$dropdown.attr({id:i,"class":"select-dropdown","data-dropdown":"","data-v-offset":0,"data-h-offset":0,"data-close-on-click":!0}),this.$dropdown.append(l),a.append(this.$dropdown),this.$list=e("<ul>"),l.append(this.$list),this.$options={},this.$autoSelect=!1,this.$select.find("option").each(this._setOption.bind(this)),this.$element.attr("placeholder",this.options.placeholder),a.foundation(),this._events(),this.$autoSelect!==!1&&this.$options[this.$autoSelect].find("a").trigger("click")}},{key:"_setOption",value:function(t,i){var s=e(i).val(),n=e(i).text();return""==s?void(this.options.placeholder=""==this.options.placeholder?n:this.options.placeholder):((s==this.options.value||e(i).is(":selected"))&&(this.$autoSelect=s),void(this.$options[s]=e('<li><a data-value="'+s+'">'+n+"</a></li>").appendTo(this.$list)))}},{key:"_events",value:function(){var t=this,i=this;this.$element.add(this.$dropdown).off("keybord.zf.dropdown").on("keydown.zf.select",function(e){Foundation.Keyboard.handleKey(e,"Select",{open:function(){$target.is(i.$element)&&(i.$dropdown.trigger("open"),i.$dropdown.attr("tabindex",-1).focus(),e.preventDefault())},select_down:function(){e.preventDefault();var t=i.$list.find("a.selected"),s=void 0;t.parent().is(":last-child")||(s=t.length>0?t.parent().next().find("a"):i.$list.find("li:first-child a"),i.$select.val(s.data("value")),i.$element.val(s.text()),i.$list.find("li a").removeClass("selected"),s.addClass("selected"))},select_up:function(){e.preventDefault();var t,s=i.$list.find("a.selected");s.parent().is(":first-child")||(t=s.length>0?s.parent().prev().find("a"):i.$list.find("li:last-child a"),i.$select.val(t.data("value")),i.$element.val(t.text()),i.$list.find("li a").removeClass("selected"),t.addClass("selected"))},tab:function(){i.$dropdown.trigger("close")},close:function(){i.$dropdown.trigger("close"),i.$element.focus()}})}),e.each(this.$options,function(){var s=e(t).find("a");s.on("click",function(e){return i.select(e)})})}},{key:"select",value:function(t){t.preventDefault();var i=e(t.currentTarget);this.$select.val(i.data("value")),this.$element.val(i.text()),this.$list.find("li a").removeClass("selected"),i.addClass("selected"),this.$dropdown.trigger("close"),this.$element.focus()}},{key:"destroy",value:function(){this.$wrapper.after(this.$select.detach()),this.$wrapper.remove(),Foundation.unregisterPlugin(this)}}],[{key:"defaults",get:function(){return{iconClass:"fa-caret-down",placeholder:"",value:""}}}]),t}();Foundation.plugin(t,"Select")}(jQuery);